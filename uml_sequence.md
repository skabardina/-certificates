<h1>Диаграмма последовательности</h1>

<h3>Последовательность шагов</h3>

**Основной сценарий: Заказ справки**

1. Сотрудник заходит в личный кабинет (ЛК) и переходит в раздел «Справки и документы».
2. Корпоративный портал (КП) отображает список доступных справок.
3. Сотрудник выбирает нужную справку и нажимает «Заказать».
4. КП фиксирует заявку, присваивает статус "Создано" и передает запрос учетной системе (УС).
5. УС определяет, к какому отделу относится справка (Бухгалтерия или HR).
6. Бухгалтер(HR) получает заявку и присваивает статус "В работе".

**Сценарий: Автоматически генерируемая справка**

7.1. Бухгалтер(HR) отправляет запрос на создание справки. </br>
7.2. УС формирует справку. </br>
7.3. УС отправляет бухгалтеру(HR) уведомление о необходимости согласования. </br>
7.4. Бухгалтер(HR) проверяет данные и нажимает "Согласовано". </br>
7.5. УС передает справку в КП, который загружает её в ЛК сотрудника. </br>
7.6. КП отправляет уведомление сотруднику о готовности справки.</br>

**Сценарий: Справка формируется вручную**

8.1. УС отправляет бухгалтеру(HR) уведомление о запросе справки. </br>
8.2. Бухгалтер(HR) вручную формирует справку и загружает файл в УС. </br>
8.3. Бухгалтер(HR) при необходимости оставляет комментарий и нажимает "Отправить". </br>
8.4. УС передает справку в КП, который загружает её в ЛК сотрудника. </br>
8.5. КП отправляет уведомление сотруднику о готовности справки. </br>

**Альтернативные сценарии**
*Некорректный запрос*
7. Бухгалтер / HR проверяет заявку и отклоняет её. </br>
8. УС присваивает заявке статус "Отклонено" и добавляет комментарий. </br>
9. КП отправляет уведомление сотруднику об отказе.

*Сотрудник отменяет заявку до обработки.*
6. Сотрудник в ЛК выбирает заявку и нажимает "Отменить".
7. Система меняет статус заявки на "Отменено".

*Технический сбой при отправке запроса.*
4. Система выводит сообщение об ошибке.
5. Сотрудник может повторить запрос.

*Ошибка при генерации документа.*
7.4. Бухгалтер обнаруживает ошибку в автоматически сгенерированной справке.
7.5. Бухгалтер переходит к ручному формированию справки.

![image](https://github.com/skabardina/-certificates/blob/main/UML%20Sequence.png)



```PlantUml 

@startuml
actor Сотрудник
participant КП
participant УС
actor Бухгалтер_HR

Сотрудник -> КП : Переходит в раздел "Справки и документы"
КП -> Сотрудник : Отображает доступные справки
Сотрудник -> КП : Выбирает справку и нажимает "Заказать"
КП -> УС : Отправляет запрос на создание справки
УС -> УС : Определяет отдел для обработки
УС -> Бухгалтер_HR : Отправляет запрос на обработку
Бухгалтер_HR -> УС : Присваивает статус "В работе"

alt Сотрудник отменяет заявку
  Сотрудник -> КП : Нажимает "Отменить"
  КП -> УС : Меняет статус на "Отменено"
end

alt Технический сбой при отправке запроса
  УС -> КП : Выводит сообщение об ошибке
  Сотрудник -> УС : Повторяет запрос
end

alt Автоматическое генерирование справки
    Бухгалтер_HR -> УС : Отправляет запрос на создание справки
    УС -> УС : Генерирует справку
    УС -> Бухгалтер_HR : Уведомление о необходимости согласования
    Бухгалтер_HR -> УС : Проверяет и нажимает "Согласовано"
    УС -> КП : Передает готовую справку
    КП -> Сотрудник : Уведомление о готовности справки
    Сотрудник -> КП : Скачивает справку / отправляет на печать

  else Ошибка при генерации документа
    Бухгалтер_HR -> УС : Обнаруживает ошибку в справке
    УС -> Бухгалтер_HR : Переходит к ручной генерации

alt Ручная генерация справки
  Бухгалтер_HR -> УС : Формирует справку и отправляет
  УС -> КП : Передает справку
  КП -> Сотрудник : Уведомление о готовности справки
  Сотрудник -> КП : Скачивает справку / отправляет на печать

else Некорректный запрос
  Бухгалтер_HR -> УС : Присваивает статус "Отклонено"
  УС -> КП : Отправляет уведомление об отказе
  КП -> Сотрудник : Уведомление об отклонении заявки
end


@enduml
```
